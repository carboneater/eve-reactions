<html>
    <title>Reactions Scheme</title>
    <style type="text/css" media="screen">
        body { background-color: #000; }
        body,td { font: .8em Gotham, Helvetica Neue, Helvetica, Arial Narrow, Arial; font-weight: 500; color: #666; padding: 0; margin: 0; }
        ul { list-style: none none; margin: 0; padding: 0; display: block; }
        
        a,a:link { color: #ffcc00; text-decoration: none; }
        
        td { padding: 4px 4px; text-align: center; border: 1px solid #111; border-width: 1px 0; }
        tr:last-child td { border-bottom-width: 0; }
        tr.header td { padding: 10px 4px; font-size: 1.5em; font-weight: 200; color: #aaa; }
        tr.header td i { font-size: .4em; font-weight: 200; font-style: normal; }

        .items li { margin: 5px 0px; }
        .items li.current span { text-shadow: 0px 0px 8px #79cef4; }
        .arrows li { margin: 5px 0px; color: #333; }
        .items li span { white-space: nowrap; cursor: pointer; background-color: rgba(0,0,0,0.75); border-radius: 3px; padding: 1px 4px; }
        
        tr.footer { display: none; }
    /*
        tr.footer td { color: #111; }
        .p1 td,.p2 td,.p3 td,.p4 td,
        .p1,.p2,.p3,.p4 { font-weight: 900 !important; }
        .p1.current,.p2.current,.p3.current,.p4.current,
        .p1.current td,.p2.current td,.p3.current td,.p4.current td { color: red; }
    */
        #canvas { z-index: 1; display: block; position: absolute; left: 0; top: 0; background-color: transparent; }
        #reactions { z-index: 2; border-collapse: collapse; position: relative; left: 0; top: 0; }

    </style>
    <body>
        <table id="reactions" border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr class="header">
                <td valign="top" colspan="3">Moon Ores</td>
                <td valign="top"></td>
                <td valign="top" colspan="3">Raw Materials</td>
                <td valign="top"></td>
                <td valign="top" colspan="3">Processed</td>
                <td valign="top"></td>
                <td valign="top" colspan="3">Advanced</td>
            </tr>
            <tr>
                <td colspan="3" class="items">
                    <ul id="ores">
                        <li class="">Bitumens</li>
                        <li class="">Carnotite</li>
                        <li class="">Cinnabar</li>
                        <li class="">Cobaltite</li>
                        <li class="">Coesite</li>
                        <li class="">Chromite</li>
                        <li class="">Euxenite</li>
                        <!--<li class="">Fullerite-C28</li>
                        <li class="">Fullerite-C32</li>
                        <li class="">Fullerite-C50</li>
                        <li class="">Fullerite-C60</li>
                        <li class="">Fullerite-C70</li>
                        <li class="">Fullerite-C72</li>
                        <li class="">Fullerite-C80</li>
                        <li class="">Fullerite-C84</li>
                        <li class="">Fullerite-C320</li>
                        <li class="">Fullerite-C540</li>-->
                        <li class="">Loparite</li>
                        <li class="">Monazite</li>
                        <li class="">Otavite</li>
                        <li class="">Pollucite</li>
                        <li class="">Scheelite</li>
                        <li class="">Sperrylite</li>
                        <li class="">Sylvite</li>
                        <li class="">Titanide</li>
                        <li class="">Vanadinite</li>
                        <li class="">Zeolites</li>
                        <li class="">Zircon</li>
                        <li class="">Xenotime</li>
                        <li class="">Ytterbite</li>
                    </ul>
                </td>
                <td class="items"></td>
                <td colspan="3" class="items">
                    <ul id="raw">
                        <li class="carnotite otavite xenotime zeolites">Atmospheric Gases</li>
                        <li class="otavite ytterbite">Cadmium</li>
                        <li class="pollucite">Caesium</li>
                        <li class="chromite monazite">Chromium</li>
                        <li class="carnotite cobaltite xenotime">Cobalt</li>
                        <li class="xenotime">Dysprosium</li>
                        <li class="chromite cinnabar monazite sperrylite sylvite">Evaporite Deposits</li>
                        <li class="zircon">Hafnium</li>
                        <li class="bitumens chromite loparite pollucite">Hydrocarbons</li>
                        <li class="cinnabar">Mercury</li>
                        <li class="monazite">Neodymium</li>
                        <li class="loparite sperrylite">Platinum</li>
                        <li class="loparite">Promethium</li>
                        <li class="euxenite loparite pollucite">Scandium</li>
                        <li class="coesite vanadinite ytterbite zircon">Silicates</li>
                        <li class="carnotite">Technetium</li>
                        <li class="ytterbite">Thulium</li>
                        <li class="titanite ytterbite zircon">Titanium</li>
                        <li class="cinnabar monazite scheelite">Tungsten</li>
                        <li class="vanadinite xenotime">Vanadium</li>
                    </ul>
                </td>
                <td class="items"></td>
                <td colspan="3" class="items">
                    <ul id="processed">
                        <li class="cadmium caesarium oxygen-fuel-block">Caesarium Cadmide</li>
                        <li class="helium-fuel-block hydrocarbons silicates">Carbon Polymers</li>
                        <li class="evaporite-deposits hydrogen-fuel-block silicates">Ceramic Powder</li>
                        <li class="cadmium cobalt helium-fuel-block">Crystallite Alloy</li>
                        <li class="dysprosium helium-fuel-block mercury">Dysporite</li>
                        <li class="hydrogen-fuel-block scandium vanadium">Fernite Alloy</li>
                        <li class="dysprosium hafnium hydrogen-fuel-block">Ferrofluid</li>
                        <li class="neodymium oxygen-fuel-block thulium">Fluxed Condensates</li>
                        <li class="chromium nitrogen-fuel-block platinum">Hexite</li>
                        <li class="nitrogen-fuel-block promethium vanadium">Hyperflurite</li>
                        <li class="helium-fuel-block mercury neodymium">Neo Mercurite</li>
                        <li class="nitrogen-fuel-block platinum technetium">Platinum Technite</li>
                        <li class="helium-fuel-block mercury promethium">Promethium Mercurite</li>
                        <li class="cadmium oxygen-fuel-block promethium">Prometium</li>
                        <li class="nitrogen-fuel-block platinum tungsten">Rolled Tungsten Alloy</li>
                        <li class="evaporite-deposits oxygen-fuel-block">Silicon Diborite</li>
                        <li class="caesium chromium oxygen-fuel-block">Solerium</li>
                        <li class="atmospheric-gases evaporite-deposits nitrogen-fuel-block">Sulfuric Acid</li>
                        <li class="hafnium hydrogen-fuel-block thulium">Thulium Hafnite</li>
                        <li class="chromium oxygen-fuel-block titanium">Titanium Chromide</li>
                        <!--<li class="cadmium nitrogen-fuel-block scandium">Unrefined Caesarium Cadmide</li>
                        <li class="cobalt helium-fuel-block silicates">Unrefined Crystallite Alloy</li>
                        <li class="cadmium helium-fuel-block mercury">Unrefined Dysporite</li>
                        <li class="hydrocarbons hydrogen-fuel-block scandium">Unrefined Fernite Alloy</li>
                        <li class="cadmium hafnium hydrogen-fuel-block">Unrefined Ferrofluid</li>
                        <li class="oxygen-fuel-block platinum vanadium">Unrefined Fluxed Condensates</li>
                        <li class="atmospheric-gases evaporite-deposits nitrogen-fuel-block">Unrefined Hexite</li>
                        <li class="chromium nitrogen-fuel-block vanadium">Unrefined Hyperflurite</li>
                        <li class="helium-fuel-block mercury platinum">Unrefined Neo Mercurite</li>
                        <li class="cobalt helium-fuel-block platinum">Unrefined Platinum Technite</li>
                        <li class="chromium helium-fuel-block mercury">Unrefined Promethium Mercurite</li>
                        <li class="cadmium chromium oxygen-fuel-block">Unrefined Prometium</li>
                        <li class="atmospheric-gases nitrogen-fuel-block tungsten">Unrefined Rolled Tungsten Alloy</li>
                        <li class="chromium hydrogen-fuel-block scandium">Unrefined Solerium</li>
                        <li class="hafnium hydrogen-fuel-block titanium">Unrefined Thulium Hafnite</li>
                        <li class="evaporite-deposits nitrogen-fuel-block titanium">Unrefined Titanium Chromide</li>
                        <li class="oxygen-fuel-block titanium vanadium">Unrefined Vanadium Hafinte</li>-->
                        <li class="hafnium hydrogen-fuel-block vanadium">Vanadium Hafnite</li>
                    </ul>
                </td>
                <td class="items"></td>
                <td colspan="3" class="items">
                    <ul id="advanced">
                        <li class="carbon-polymers crystallite-alloy helium-fuel-block">Crystalline Carbonide</li>
                        <li class="caesarium-cadmide dysporite fluxed-condensates helium-fuel-block prometium">Fermionic Condensates</li>
                        <li class="ceramic-powder fernite-alloy hydrogen-fuel-block">Fernite Carbide</li>
                        <li class="ferrofluid hexite hydrogen-fuel-block hyperflurite prometium">Ferrogel</li>
                        <li class="carbon-polymers nitrogen-fuel-block platinum-technite">Fullerides</li>
                        <li class="dysporite oxygen-fuel-block solerium vanadium-hafnite">Hypersynaptic Fibers</li>
                        <li class="neo-mercurite nitrogen-fuel-block platinum-technite sulfuric-acid">Nanotransistors</li>
                        <li class="ferrofluid nitrogen-fuel-block titanium-chromide">Nonlinear Metamaterials</li>
                        <li class="caesarium-cadmide oxygen-fuel-block silicon-diborite vanadium-hafnite">Phenolic Composites</li>
                        <li class="crystallite-alloy oxygen-fuel-block thulium-hafnite">Photonic Metamaterials</li>
                        <li class="fernite-alloy hydrogen-fuel-block neo-mercurite">Plasmonic Metamaterials</li>
                        <li class="ceramic-powder helium-fuel-block hexite">Sylramic Fibers</li>
                        <li class="helium-fuel-block promethium-mercurite rolled-tungsten-alloy">Terahertz Metamaterials</li>
                        <li class="oxygen-fuel-block silicon-diborite titanium-chromide">Titanium Carbide</li>
                        <li class="nitrogen-fuel-block rolled-tungsten-alloy sulfuric-acid">Tungsten Carbide</li>
                    </ul>
                </td>
            </tr>
        </table>
        <canvas id="canvas"></canvas>
        <div style="position: fixed; bottom: 0; text-align: center; width: 100%;">
        <h2 style="margin: 0px;">Disclaimer</h2>
        Based on <a href="https://hanns.io/pi/">Alysii's/Hanns.io</a> PI Scheme<br>
        All Inacuracies are mine<br/>
        Material related to EVE-Online is used with limited permission of CCP Games hf.<br>
        No official affiliation or endorsement by CCP Games hf is stated or implied.<br><br>
        <small style="font-size: 0.6em">EVE Online and the EVE logo are the registered trademarks of CCP hf. All rights are reserved worldwide. All other trademarks are the property of their respective owners. EVE Online, the EVE logo, EVE and all associated logos and designs are the intellectual property of CCP hf. All artwork, screenshots, characters, vehicles, storylines, world facts or other recognizable features of the intellectual property relating to these trademarks are likewise the intellectual property of CCP hf. CCP hf. has granted permission to [insert your name or site name] to use EVE Online and all associated logos and designs for promotional and information purposes on its website but does not endorse, and is not in any way affiliated with, [insert name or site name]. CCP is in no way responsible for the content on or functioning of this website, nor can it be liable for any damage arising from the use of this website.</small>
        </div>
    </body>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script>
        $(document).ready(function() {
            
            var colors = ["#333","#492f1f","#763c19","#f7941d","yellow","#79cef4","#00aeef","lime","green","#304b15"];
            $(".items li").css({color:colors[0]});
            
            canvas();
            $(window).resize(function() { // todo: get event, only repaint on mouse release
                canvas();
            });

            // distribute before list to span
            $(".items ul li")
                .wrapInner($('<span />'))
                .each(function() {

                    item = lower_case($(this).children("span").html());		// turn item name css compliant
                    $(this).attr({ id: item });								// set li id as item name
                    
                    if ($(this).parents("ul").attr("id") != "ores") {		// ores has no before
                        list = $(this).attr("class").split(/\s+/);			// get before items from li class
                        for (i in list) {
                            $("#"+list[i]+" span").addClass(item);			// find id with class, inject itself into span as class
                        }
                    }
                })
            $('.items')
                .on('mouseenter','ul li',function() {
                    if (! $('#reactions').hasClass('sticky')) {
                        $(this).addClass("current");
                        $(this).css({color:colors[5]});
                        reactions_link($(this));
                    }
                })
                .on('mouseleave','ul li',function() {
                    if (! $('#reactions').hasClass('sticky')) {
                        $(this).removeClass("current");
                        $(".items li").css({color:colors[0]});
                        canvas();
                    }
                })
                .on('click','ul li',function() {
                    
                    if (!$(this).hasClass('current')) {
                        $('#reactions').removeClass('sticky')
                    }
                    
                    if ($('#reactions').hasClass('sticky')) {
                        $('#reactions').removeClass('sticky')
                        
                        $('.items li').removeClass('current').css({color:colors[0]});
                    } else {
                        $('#reactions').addClass('sticky')
                        
                        $('.items li').removeClass('current').css({color:colors[0]});
                        canvas();

                        $(this).addClass("current");
                        $(this).css({color:colors[5]});
                        reactions_link($(this));
                    }
                })
                
                // $("ul#basic").hover(function() { $(".p1").toggleClass("current"); });
                // $("ul#refined").hover(function() { $(".p2").toggleClass("current"); });
                // $("ul#specialized").hover(function() { $(".p3").toggleClass("current"); });
                // $("ul#advanced").hover(function() { $(".p4").toggleClass("current"); });
            
            function lower_case(s) { return s.toLowerCase().replace(/ /g, '-').replace(/\./g, ''); }
            function reactions_link(item) {
                reactions_link_before(item,-1);
                reactions_link_after(item,1);
            }
            function reactions_link_before(item, degree, depth) {
                type   = item.parent("ul").attr("id");
                degree = degree + ((type == "basic") ? 1 : 0);

                class_prefex = ".items li span.";
                $(".items li span."+item.attr("id"))
                    .each(function() {
                        $(this).parent("li").css({color: colors[5+degree]});
                        if (type != "basic" && degree > -4) {
                            line(item.children("span"),$(this),colors[5+degree],colors[5+degree+1]);
                        }
                        reactions_link_before($(this).parent("li"),degree-1);
                    });
            }
            function reactions_link_after(item, degree, depth) {
                type   = item.parent("ul").attr("id");
                degree = degree + ((type == "resources") ? -1 : 0);
                
                $(".items li."+item.attr("id"))
                    .each(function() {
                        $(this).css({color: colors[5+degree]});
                        if (type != "resources" && degree < 3) {
                            line($(this).children("span"),item.children("span"),colors[5+degree-1],colors[5+degree]);
                        }
                        reactions_link_after($(this),degree+1);
                    });
            }
        });
        function canvas() {
            $("#canvas").attr({ 
                "height": $("#reactions").outerHeight(),
                "width": $("#reactions").outerWidth() 
            });
        }
        function line(a,b,c1,c2) {
            pad = 0;
            fx  = a.position().left + 4;
            fy  = a.position().top + a.height()/2 + 1;
            tx  = b.position().left + b.width() + 2;
            ty  = b.position().top + b.height()/2 + 1;

            var cvs = document.getElementById('canvas');

            var ctx = cvs.getContext('2d');
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(tx,ty);
            ctx.lineTo(fx,fy);
            ctx.globalAlpha = 0.5;

            var gdt = ctx.createLinearGradient( tx,ty, fx,fy );
            gdt.addColorStop(0, c1);
            gdt.addColorStop(1, c2);

            ctx.strokeStyle = gdt;
            ctx.stroke();
        }

        pi = {
            ores: ['Bitumens','Carnotite','Cinnabar','Cobaltite','Oceanic','Coesite','Chromite','Euxenite','Loparite','Monazite','Otavite','Pollucite','Scheelite','Sperrylite','Sylvite','Titanide','Vanadinite','Zeolites','Zircon','Xenotime','Ytterbite'],
            productions: {
                raw: ['Atmospheric Gases','Cadmium','Caesium','Chromium','Cobalt','Dysprosium','Evaporite Deposits','Hafnium','Hydrocarbons','Mercury','Neodymium','Platinum','Promethium','Scandium','Silicates','Technetium','Thulium','Titanium','Tungsten','Vanadium'],
                processed: ['Caesarium Cadmide','Carbon Polymers','Ceramic Powder','Crystallite Alloy','Dysporite','Fernite Alloy','Ferrofluid','Fluxed Condensates','Hexite','Hyperflurite','Neo Mercurite','Platinum Technite','Promethium Mercurite','Prometium','Rolled Tungsten Alloy','Silicon Diborite','Solerium','Sulfuric Acid','Thulium Hafnite','Titanium Chromide','Vanadium Hafnite'],
                advanced: ['Crystalline Carbonide','Fermionic Condensates','Fernite Carbide','Ferrogel','Fullerides','Hypersynaptic Fibers','Nanotransistors','Nonlinear Metamaterials','Phenolic Composites','Photonic Metamaterials','Plasmonic Metamaterials','Sylramic Fibers','Terahertz Metamaterials','Titanium Carbide','Tungsten Carbide']
            } 
        }
    </script>
</html>
